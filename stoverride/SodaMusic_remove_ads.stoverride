name: |-
  æ±½æ°´éŸ³ä¹å»å¹¿å‘Š
desc: |-
  ç§»é™¤å¼€å±å¹¿å‘Šã€å¼¹çª—å¹¿å‘Šã€æ’­æ”¾å™¨æ¨å¹¿ã€æ­Œæ›²è¯¦æƒ…ç•Œé¢è§†é¢‘æ¨å¹¿ã€æ’­æ”¾é¡µé¢çš„æ­Œæ›²è§†é¢‘ï¼Œç²¾ç®€é¦–é¡µå’Œæˆ‘çš„é¡µé¢ã€‚
author: |-
  å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md]
icon: |-
  https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/SodaMusic.png
category: |-
  iKeLee
openUrl: |-
  https://apps.apple.com/app/id1605585211
tag: |-
  å»å¹¿å‘Š
loon_version: |-
  3.2.4(787)
homepage: |-
  https://github.com/luestr/ProxyResource/blob/main/README.md
date: |-
  2025-05-18 01:29:34

http:

  mitm:
    - "webcast-open.douyin.com"
    - "beta-luna.douyin.com"
    - "api.qishui.com"

  url-rewrite:
# è¿½åŠ çš„é”€å”®é…ç½®
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/commerce\/upsells_config\? - reject-dict
# å¹¿å‘Šä¸‹å‘
    - >-
      ^https:\/\/api\.qishui\.com\/luna\/ads\/ - reject-dict
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/ads\/ - reject-dict
# å‘ç°é¡µé¢ - æ­£åœ¨ç›´æ’­
    - >-
      ^https:\/\/webcast-open\.douyin\.com\/webcast\/openapi\/feed\/\? - reject-dict
# ç­¾åˆ°å…¥å£
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/treasure\/entrance\/config\? - reject-dict
# æœç´¢é¡µé¢ - æ¨ªå¹…æ¨å¹¿
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/activities\? - reject-dict
# æ’­æ”¾å™¨ - è§†é¢‘å¹¿å‘Š
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/media_ads\? - reject-dict
# å…è´¹å¬æ­Œæ¨å¹¿
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/commerce\/upsells\? - reject-dict
# é‚€è¯·å¼€é€šä¼šå‘˜å¼¹çª—
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/commerce\/v2\/commerce_info\? - reject-dict

  body-rewrite:
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/me\? response-jq delpaths([["reward_ad_banner"]])
    - >-
      # ^https:\/\/beta-luna\.douyin\.com\/luna\/me\/recently-played-media\? response-jq .media |= map(select(.type != "video"))
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/feed\/song-tab\? response-jq del(.items[] | select(.type == "video_track_mix"))
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/card\? response-jq delpaths([["preview_guide"]])
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/card\? response-jq del(.card_items[] | select(has("priority_display")))
    - >-
      ^https:\/\/beta-luna\.douyin\.com\/luna\/more-panel\? response-jq .blocks |= map(select(.type != "related_video"))

  script:
# æ’­æ”¾é¡µé¢ - è§†é¢‘æµ[å“åº”ä½“å¤ªå¤§]
    - match: ^https:\/\/beta-luna\.douyin\.com\/luna\/me\/recently-played-media\?
      name: "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘æµ_42"
      type: response
      require-body: true

script-providers:
  "ç§»é™¤æ’­æ”¾é¡µé¢è§†é¢‘æµ_42":
    url: https://kelee.one/Resource/Script/SodaMusic/SodaMusic_remove_ads.js
    interval: 86400

